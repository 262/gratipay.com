"""Given a email and password, return a boolean.
"""
from logstown import parse_rows
from logstown.authentication import sign_in, sessions, User

rows = """\
*Email
*[50]Password;*[50]Confirm
(submit)Sign In|Signing In
"""

# ========================================================================== ^L

out = {}
out['html'] = ''
out['rows'] = ''

if request.user.ANON:
    if request.POST:
        email = request.body.one('email')
        password = request.body.one('password')
        problem = ""

        session = {}
        if email is not None:
            session = sign_in(email, password)
        if not session:
            problem = "Sorry, those credentials are invalid."

        request.user = User(session)
    out['rows'] = parse_rows(rows)
else:
    out['html'] = "You are signed in as %s." % request.user.session['email']

response.body = out
