from logstown import db

^L

with db.execute("SELECT * FROM users") as cursor:
    users = cursor
with db.execute("SELECT * FROM payments") as cursor:
    payments = cursor

^L
<h2>Payments</h2>
<table>
    <tr>
        <th>email</th>
        <th>hash</th>
        <th>payment_method_token</th>
        <th>session_expires</th>
        <th>session_token</th>
        <th>teacher</th>
    </tr>
{% for rec in users %}
<tr>
{% for k,v in sorted(rec.items()) %}
<td>{{ v }}</td>
{% end %}</tr>
{% end %}
</table>

<h2>Payments</h2>
<table>
    <tr>
        <th>amount</th>
        <th>email</th>
        <th>timestamp</th>
    </tr>
{% for rec in payments %}
<tr>
{% for k,v in sorted(rec.items()) %}
<td>{{ v }}</td>
{% end %}</tr>
{% end %}
</table>
